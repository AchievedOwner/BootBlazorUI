@page "/datagrid"

@using BootBlazorUI.DataGrid

<PageTitle Title="数据表格(Data Grid)">
    数据表格可以将数据源使用数据绑定的形式呈现，并提供了强大的交互功能。先引用命名空间 <code>using BootBlazorUI.DataGrid</code>
</PageTitle>
@code{
    class User
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public DateTime Birthday { get; set; }
    }

    List<User> user = new List<User>
{
        new User{ Id=1001,Name="张三", Birthday=new DateTime(1996,5,7) },
        new User{ Id=1002,Name="李四",Birthday=new DateTime(1982,6,15) },
        new User{ Id=1003,Name="王五",Birthday=new DateTime(1992,12,31) },
        new User{ Id=1004,Name="赵六",Birthday=new DateTime(1988,2,14) }
    };
}

<PresentationPart Title="简单示例">
    <Description>
        设置 <code>DataSource</code> 获取相关数据，数据源要求实现了 <code>IEnumerable</code> 接口。
        <p>示例中采用的数据来自以下代码：</p>
        @Code.GetCode(@"
```cs
class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public DateTime Birthday { get; set; }
}

List<User> user = new List<User>
{
    new User{ Id=1001,Name=""张三"", Birthday=new DateTime(1996,5,7) },
    new User{ Id=1002,Name=""李四"",Birthday=new DateTime(1982,6,15) },
    new User{ Id=1003,Name=""王五"",Birthday=new DateTime(1992,12,31) },
    new User{ Id=1004,Name=""赵六"",Birthday=new DateTime(1988,2,14) }
};
```
")
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource=" user">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>

<PresentationPart Title="显示行号">
    <Description>
        设置 <code>RowNumber="true"</code> 启用行号。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource=" user" RowNumber="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>

    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"" RowNumber=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>

<PresentationPart Title="行间隔">
    <Description>
        设置 <code>Striped="true"</code> 可让每行之间有一个间隔颜色。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource=" user" Striped="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"" Striped=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>
<PresentationPart Title="边框设置">
    <Description>
        设置 <code>Bordered="true"</code> 让每一个单元格都有边框。设置 <code>Borderless="true"</code> 让所有边框都隐藏。
    </Description>
    <RunTemplate>
        <h6>显示边框</h6>
        <BootDataGrid DataSource=" user" Bordered="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
        <h6>隐藏边框</h6>
        <BootDataGrid DataSource=" user" Borderless="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"" Bordered=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
        <BootDataGrid DataSource=""user"" Borderless=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>
<PresentationPart Title="悬浮高亮">
    <Description>
        设置 <code>Hover="true"</code> 鼠标悬停行会高亮显示。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource=" user" Hover="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"" Hover=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>
<PresentationPart Title="压缩间距">
    <Description>
        设置 <code>Small="true"</code> 会压缩单元格的空间。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource=" user" Small="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"" Small=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>
<PresentationPart Title="深色背景">
    <Description>
        设置 <code>Dark="true"</code> 使用深色背景。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource=" user" Dark="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"" Dark=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>
<PresentationPart Title="格式化列的值">
    <Description>
        使用 <code>Format</code> 可以格式化显示的数据。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource=" user">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" Format="{0:yyyy年MM月dd日}" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""user"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" Format=""{0:yyyy年MM月dd日}""/>
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>

<PresentationPart Title="固定标题栏">
    <Description>
        设置 <code>RowHeight</code> 固定行高度，单位是 px，同时将标题栏会置顶固定。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource="userList" RowHeight="300">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""userList"" RowHeight=""300"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>

<PresentationPart Title="行点击事件">
    <Description>
        当数据行被点击时，会触发 <code>OnRowSelected</code> 事件。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource="userList" RowHeight="300" OnRowSelected="@(e=>_js.InvokeVoidAsync("alert",$"点击了第{e.Index}行"))">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""userList"" RowHeight=""300"" OnRowSelected=""@(e=>_js.InvokeVoidAsync(""alert"",$""点击了第{e.Index}行""))"">
<BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
<BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
<BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>

<PresentationPart Title="行点击后高亮">
    <Description>
        设置 <code>RowSelectedColor</code> 可使行点击后高亮该行，若再次点击则取消高亮。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource="userList" RowHeight="300" RowSelectedColor="Color.Primary">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""userList"" RowHeight=""300"" RowSelectedColor=""Color.Primary"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>
<PresentationPart Title="选择多行">
    <Description>设置 <code>RowMultipleSelect="true"</code> 则可以选择多个行的高亮。</Description>
    <RunTemplate>
        <BootDataGrid DataSource="userList" RowHeight="300" RowSelectedColor="Color.Success" RowMultipleSelect="true">
            <BootDataGridFieldColumn Title="Id" Field="Id" />
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""userList"" RowHeight=""300"" RowSelectedColor=""Color.Success"" RowMultipleSelect=""true"">
    <BootDataGridFieldColumn Title=""Id"" Field=""Id"" />
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>

<PresentationPart Title="自定义列模板">
    <Description>
        增加 <code>BootDataGridTemplateColumn</code> 来自定义列的内容。可以使用 <code>context</code> 作为当前行对象，调用 <code>GetValue</code> 方法并传入一个数据源的字段获取值。
    </Description>
    <RunTemplate>
        <BootDataGrid DataSource="userList" RowHeight="300">
            <BootDataGridTemplateColumn Title="自定义列" Width="20px">
                <input type="checkbox" value="@(context.GetValue(nameof(User.Id)))" @onchange="@(e=>_js.InvokeVoidAsync("alert",$"选择了Id:{context.GetValue(nameof(User.Id))}的值"))" />
            </BootDataGridTemplateColumn>
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<BootDataGrid DataSource=""userList"" RowHeight=""400"">
<BootDataGridTemplateColumn Title=""自定义列"" Width=""20px"">
    <input type=""checkbox"" value=""@(context.GetValue(nameof(User.Id)))"" @onchange=""@(e=>_js.InvokeVoidAsync(""alert"",$""选择了Id:{context.GetValue(nameof(User.Id))}的值""))"" />
</BootDataGridTemplateColumn>
<BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
<BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>
<PresentationPart Title="自定义无数据时的显示">
    <Description>
        设置 <code>DataEmptyTemplate</code> 可自定义数据为空时的内容。注意使用 <code>ChildContent</code> 将设置的列进行封装。
    </Description>
    <RunTemplate>
        <h5>默认空数据文本</h5>
        <BootDataGrid DataSource="new List<User>()" Small="true">
            <BootDataGridFieldColumn Title="姓名" Field="Name" />
            <BootDataGridFieldColumn Title="生日" Field="Birthday" />
        </BootDataGrid>
        <br />
        <h5>自定义空数据内容</h5>
        <BootDataGrid DataSource="new List<User>()" Small="true">
            <DataEmptyTemplate>
                <i class="fa fa-list"></i> 自定义没有数据的显示内容！
            </DataEmptyTemplate>
            <ChildContent>
                <BootDataGridFieldColumn Title="姓名" Field="Name" />
                <BootDataGridFieldColumn Title="生日" Field="Birthday" />
            </ChildContent>
        </BootDataGrid>
    </RunTemplate>
    <CodeTemplate>
        @Code.GetCode(@"
```html
<h5>默认空数据文本</h5>
<BootDataGrid DataSource=""new List<User>()"" Small=""true"">
    <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
    <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
</BootDataGrid>
<br />
<h5>自定义空数据内容</h5>
<BootDataGrid DataSource=""new List<User>()"" Small=""true"">
    <DataEmptyTemplate>
        <i class=""fa fa-list""></i> 自定义没有数据的显示内容！
    </DataEmptyTemplate>
    <ChildContent>
        <BootDataGridFieldColumn Title=""姓名"" Field=""Name"" />
        <BootDataGridFieldColumn Title=""生日"" Field=""Birthday"" />
    </ChildContent>
</BootDataGrid>
```
")
    </CodeTemplate>
</PresentationPart>


@inject IJSRuntime _js
@code{
    List<User> userList;

    public int TotalCount { get; set; }
    public int Page { get; set; } = 1;
    public int Size { get; set; } = 5;


    protected override void OnInitialized()
    {
        userList = new List<User>();
        var random = new Random();
        for (int i = 0; i < 100; i++)
        {
            userList.Add(new User
            {
                Id = (i + 1),
                Birthday = new DateTime(random.Next(1980, 1999), random.Next(3, 12), random.Next(1, 30)),
                Name = random.Next(99999).ToString().PadLeft(5, '0')
            });
        }
    }
}

<ArgumentDescriptionTable Title="属性">
    <tr>
        <td>DataSource <BootBadge Color="Color.Danger">required</BootBadge></td>
        <td>Object</td>
        <td>设置实现了 <code>IEnumerable</code> 接口的数据源。</td>
    </tr>
    <tr>
        <td>RowNumber</td>
        <td>Boolean</td>
        <td>设置一个布尔值，表示是否表格第一列使用行号。</td>
    </tr>
    <tr>
        <td>Striped</td>
        <td>Boolean</td>
        <td>设置一个布尔值，表示每一行是否显示间隔颜色。</td>
    </tr>
    <tr>
        <td>Bordered</td>
        <td>Boolean</td>
        <td>设置一个布尔值，表示每一个单元格是否显示边框。</td>
    </tr>
    <tr>
        <td>Borderless</td>
        <td>Boolean</td>
        <td>设置一个布尔值，表示每一个单元格是否不显示边框。</td>
    </tr>
    <tr>
        <td>Dark</td>
        <td>Boolean</td>
        <td>设置一个布尔值，表示表格使用深色背景显示。</td>
    </tr>
    <tr>
        <td>Hover</td>
        <td>Boolean</td>
        <td>设置一个布尔值，表示行在鼠标悬浮时是否有颜色高亮。</td>
    </tr>
    <tr>
        <td>Small</td>
        <td>Boolean</td>
        <td>设置一个布尔值，表示是否使用紧凑行间距。</td>
    </tr>
    <tr>
        <td>RowHeight</td>
        <td>Nullable&lt;Int32></td>
        <td>设置数据行的固定高度。单位是 px。</td>
    </tr>
    <tr>
        <td>DataEmptyTemplate</td>
        <td>RenderFragment</td>
        <td>设置数据源是空时显示的内容。</td>
    </tr>
    <tr>
        <td>RowSelectedColor</td>
        <td>Nullable&lt;Color></td>
        <td>设置点击行后的该行的高亮颜色。若为 null 则不高亮。</td>
    </tr>
    <tr>
        <td>RowMultipleSelect</td>
        <td>Boolean</td>
        <td>设置一个布尔值，是否允许选择多条行。</td>
    </tr>
</ArgumentDescriptionTable>

<ArgumentDescriptionTable Title="事件">
    <tr>
        <td>OnRowSelected</td>
        <td>EventCallback&lt;BootDataGridRowSelectedEventArgs></td>
        <td>设置当数据行被点击后触发选择行事件。</td>
    </tr>
</ArgumentDescriptionTable>
<ArgumentDescriptionTable Title="方法">
    <tr>
        <td>ClickRow</td>
        <td>Task</td>
        <td>点击指定的行。</td>
    </tr>
</ArgumentDescriptionTable>
<ArgumentDescriptionTable Title="列模板">
    <tr>
        <td>BootDataGridFieldColumn</td>
        <td></td>
        <td>数据绑定的列模板</td>
    </tr>
    <tr>
        <td>BootDataGridTemplateColumn</td>
        <td></td>
        <td>自定义内容的列模板</td>
    </tr>
</ArgumentDescriptionTable>